<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {%- seo -%}
  <link rel="stylesheet" href="{{ "/assets/main.css" | relative_url }}">
  {%- feed_meta -%}
  {%- if jekyll.environment == 'production' and site.google_analytics -%}
    {%- include google-analytics.html -%}
  {%- endif -%}
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-RVVB2LHS32"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-RVVB2LHS32');
  </script>
  <script>
    window.addEventListener("load", (event) => {
      async function sha256(message) {const msgBuffer = new TextEncoder().encode(message);const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);const hashArray = Array.from(new Uint8Array(hashBuffer));const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');return hashHex;}
      const openCVButton = document.getElementById('open_cv');
      openCVButton.addEventListener('click', async () => {
        const p = await sha256(prompt("Passphrase:"))
        console.log(p, p.substr(0, 32));
        if (p.substr(0, 32) == "{{ site.passphrase }}") {
          window.open(`/images/${p}.pdf`, "_blank");
        } else {
          alert("Incorrect passphrase.");
        }
      });
    });
  </script>
</head>
